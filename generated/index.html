<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IndexedDB Manager</title>
</head>

<body>
  <h1>IndexedDB Database List</h1>
  <button onclick="refreshList()">Refresh</button>
  <div id="database-list"></div>
  <hr />
  <div>
    <ul>
      <li><a href="./gemma-3-27b/">gemma-3-27b</a></li>
      <li><a href="./gemma-3-27b-no-kv/">gemma-3-27b-no-kv</a></li>
      <li><a href="./glm-4-9b/">glm-4-9b</a></li>
      <li><a href="./glm-4-32b/">glm-4-32b</a></li>
      <li><a href="./glm-45-air-q2/">glm-45-air-q2</a></li>
      <li><a href="./glm-45-air-q4/">glm-45-air-q4</a></li>
      <li><a href="./gpt-oss-20b/">gpt-oss-20b</a></li>
      <li><a href="./gpt-oss-20b-high/">gpt-oss-20b-high</a></li>
      <li><a href="./gpt-oss-120b/">gpt-oss-120b</a></li>
      <li><a href="./granite-40-h-small/">granite-40-h-small</a></li>
      <li><a href="./nemotron-nano-12b/">nemotron-nano-12b</a></li>
      <li><a href="./phi-4-reasoning-plus/">phi-4-reasoning-plus</a></li>
      <li><a href="./qwen3-30b-a3b-extreme/">qwen3-30b-a3b-extreme</a></li>
      <li><a href="./qwen3-30b-a3b-instruct/">qwen3-30b-a3b-instruct</a></li>
      <li><a href="./qwen3-30b-a3b-thinking/">qwen3-30b-a3b-thinking</a></li>
      <li><a href="./qwen3-235b-a22b/">qwen3-235b-a22b</a></li>
      <li><a href="./seed-oss-36b/">seed-oss-36b</a></li>
    </ul>
  </div>
  <script>
    async function listDatabases() {
      try {
        const databases = await indexedDB.databases();
        const listContainer = document.getElementById('database-list');

        if (databases.length === 0) {
          listContainer.innerHTML = '<p>No databases found</p>';
          return;
        }

        let html = '<ul>';
        databases.forEach(db => {
          html += `<li>${db.name} <button onclick="deleteDatabase('${db.name}')">Delete</button></li>`;
        });
        html += '</ul>';

        listContainer.innerHTML = html;
      } catch (error) {
        console.error('Failed to get database list:', error);
        document.getElementById('database-list').innerHTML = '<p>An error occurred</p>';
      }
    }

    function deleteDatabase(dbName) {
      if (confirm(`Are you sure you want to delete database "${dbName}"?`)) {
        const deleteRequest = indexedDB.deleteDatabase(dbName);

        deleteRequest.onsuccess = function () {
          console.log(`Database "${dbName}" deleted`);
          refreshList();
        };

        deleteRequest.onerror = function () {
          console.error(`Failed to delete database "${dbName}"`);
          alert('Delete failed');
        };
      }
    }

    function refreshList() {
      listDatabases();
    }

    // Display list on page load
    window.onload = function () {
      listDatabases();
    };
  </script>
</body>

</html>
